# ============================================================================
# CEREBRO-RED v2 - Railway Deployment Configuration
# ============================================================================
# This template provides environment variables optimized for Railway deployment
# with demo mode enabled for public demo instances.
#
# Instructions:
# 1. Copy these variables to Railway dashboard (Settings > Environment)
# 2. Replace placeholder values (API keys, custom domains)
# 3. Railway automatically injects $PORT variable (do not modify)
# 4. Review security settings before deploying to production
# ============================================================================

# Application Settings
CEREBRO_ENV=production
CEREBRO_HOST=0.0.0.0
CEREBRO_PORT=${PORT}  # Railway provides this dynamically
CEREBRO_DEBUG=false
CEREBRO_LOG_LEVEL=INFO
CEREBRO_VERBOSITY=1  # Minimal logging for production

# Demo Mode (for public demo instances)
CEREBRO_DEMO_MODE=true

# Database Configuration
DATABASE_URL=sqlite+aiosqlite:////app/data/cerebro.db
DATABASE_ECHO=false

# Telemetry & Audit Logs
AUDIT_LOG_PATH=/app/data/audit_logs
AUDIT_LOG_ROTATION=daily
AUDIT_LOG_RETENTION_DAYS=90

# LLM Provider Configuration
DEFAULT_LLM_PROVIDER=ollama

# Ollama Configuration (if using Railway Ollama service)
OLLAMA_BASE_URL=http://ollama-service:11434
OLLAMA_MODEL_ATTACKER=qwen3:8b
OLLAMA_MODEL_TARGET=qwen2.5:3b
OLLAMA_MODEL_JUDGE=qwen3:8b
OLLAMA_TIMEOUT=300

# OpenAI Configuration (alternative for cloud deployment)
# Uncomment and replace with your API key for cloud LLM providers
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL_ATTACKER=gpt-4-turbo-preview
# OPENAI_MODEL_TARGET=gpt-3.5-turbo
# OPENAI_MODEL_JUDGE=gpt-4-turbo-preview

# Azure OpenAI Configuration (alternative)
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_API_KEY=...
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Security & API Configuration
API_KEY_ENABLED=false  # Disable for public demo
CORS_ORIGINS=*  # Allow all origins for demo mode (update to exact domains post-deployment: https://yourproject.up.railway.app)
CORS_ALLOW_CREDENTIALS=true
# Note: With CORS_ORIGINS=*, credentials may be restricted by browser

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# Experiment Settings
DEFAULT_EXPERIMENT_TIMEOUT=3600
ENABLE_DETAILED_TELEMETRY=false  # Reduce resource usage

# ============================================================================
# Production Security Recommendations
# ============================================================================
# For production deployments (non-demo mode):
# 1. Set CEREBRO_DEMO_MODE=false
# 2. Enable API key authentication: API_KEY_ENABLED=true
# 3. Set strong API keys: API_KEY=<generate-secure-key>
# 4. Restrict CORS origins to your specific domains:
#    CORS_ORIGINS=https://yourproject.up.railway.app,https://yourdomain.com
#    (Update after Railway deployment - domain shown in dashboard)
# 5. Enable HTTPS enforcement
# 6. Configure persistent volume for database: /app/data
# 7. Review rate limiting settings for your use case
# ============================================================================
